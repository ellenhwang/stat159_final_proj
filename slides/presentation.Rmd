---
title: "Stat 159 Final Project - Providing Credit to Students"
author: "TEAM W.O.S: Young Hoon Kim, Yoon Jung Rho,Joseph Simonian, Ellen Hwang"
date: "December 2, 2016"
output: ioslides_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

methods,results, analysis, conclusion, thank you slide



# Client Profile

## Client Profile 

Our client is a credit institution that provides financial aid to students. The managers are interested in expanding their customer base but they would also like that most of the loans be payed back.

Main Question: What features and details of a school make it reliable for credit?

# Data

## Data

1. [College Scorecard](https://ed-public-download.apps.cloud.gov/downloads/CollegeScorecard_Raw_Data.zip): data on student completion, debt and repayment, earnings, and more. The files include data from 1996 through 2016 for all undergraduate degree-granting institutions of higher education. This data was last updated on September 13th, 2016.
2. [Post-school earnings](https://ed-public-download.apps.cloud.gov/downloads/Most-Recent-Cohorts-Treasury-Elements.csv): more current and detailed information about student post-school earnings for all undergraduate degree-granting institutions of higher education


Complete College Scorecard Data is available at https://collegescorecard.ed.gov/data/

Documentation on all data is available at https://collegescorecard.ed.gov/data/documentation/

# Methods

## Methods

Response Variable: 3 Year Repayment Rate

1. Data Cleaning: 
  * replacing PrivacySuppressed columns with NULL
  * Remove all columns with at at most 50% NULL
  * replace remaining NULL columns with column means

2. Variable Selection:
  * Manually organize remaining columns by category to pick out variables relevant to research question
  * Run correlation matrix on variables and select those with at least absolute value of .5 correlation to 3 year repayment rate
  * Run basic OLS regression to narrow down the statistically significant variables

# Results

## Regression Results
**Test MSEs from OLS, Lasso, Ridge, PC, and PLS regressions**
```{r echo=FALSE, results='asis'}
library(xtable)
load('../data/RData/ols.RData')
load('../data/RData/lasso.RData')
load('../data/RData/ridge.RData')
load('../data/RData/pcr.RData')
load('../data/RData/plsr.RData')
mse <- t(as.matrix(c(rpy_3yr_regsum$sigma, rpy3yr_lasso_test_mse, rpy3yr_ridge_test_mse,
                  rpy_pcr_test_mse, rpy_pls_test_mse)))
colnames(mse) <- c("OLS", "Lasso", "Ridge", "PCR", "PLSR")
mse_table <- xtable(mse, caption = "MSE of regressions", digits=c(0,5,5,5,5,5),
                    align= c("r|r|r|r|r|r"))
print(mse_table, comment = FALSE, table.placement = '!htp', type = 'html',
      caption.placement = 'top', include.rownames = FALSE)
```

## Regression Results
**Coefficient values from Ridge regression**
```{r echo=FALSE, results='asis'}
ridge_coef <- as.data.frame(rpy3yr_rr_coef[-1,])
colnames(ridge_coef) <- "Coefficients"
ridge_coef <- xtable(ridge_coef, caption = 'Ridge Coefficients', digits = c(0,7))
print(ridge_coef, comment = FALSE, table.placement = 'H', type = 'html', caption.placement = 'top')
```

## Regression Results
**Interpretation of Ridge regression coefficients**  

According to the table above, our client should pay close attention to:  \

1. Percentages of aided students with family incomes between $48,001 - $75,000 in nominal dollars  \

2. 150 percent completion rate for less-than-four-year institutions, pooled in two-year rolling averages and suppressed for small n size  \

3. 10th percentile of earnings of students working and not enrolled 6 years after entry  \

4. Share of students earning over 25,000 dollars per year (threshold earnings) 6 years after entry  \

5. Completion rate for first-time, full-time students at four-year institutions (150 percent of expected time to completion/6 years)  \

6. Average net price for family with more than 75,000-dollar income to pay for the education for public institution  \

7. Out-of-state tuition and fees  \

## Visualization
**Distribution of 3 Year Repayment Rate by Institution Type**

<img src="../images/eda/rpy3yr_control_barplot_histogram.png" width="750px"/>

## Visualizations
**Distribution of 3 Year Repayment Rate by n Year Institutions**

<img src="../images/eda/iclevel_rpy3yr_barplot_histogram.png" width="750px"/>

## Visualizations
**Scatter Plot: Completion Rate Rate vs. 3 Year Repayment Rate**

<img src="../images/eda/complrt_rpy3yr_scatter.png" />

## Visualizations
**Scatter Plot: Net Price for Institution Type vs. 3 Year Repayment Rate**

<img src="../images/eda/netprice_pub_priv_rpy3yr_scatter.png" height="400px"/>

# Analysis
**Top 10 Schools - Future repayment rate**
```{r}
load('../data/RData/tsa_data.RData')
tops <- xtable(top_100[1:10,], caption = 'Top 10 Schools', digits=c(0,0,4))
print(tops, comment = FALSE, table.placement = 'H', type = 'latex', caption.placement = 'top')
cutoff <- top_100[nrow(top_100),2]
school_100th <- top_100[nrow(top_100),1]
```

# Conclusion

# Thank You!